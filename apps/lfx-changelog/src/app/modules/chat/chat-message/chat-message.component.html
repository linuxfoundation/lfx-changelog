<!-- Copyright The Linux Foundation and each contributor to LFX. -->
<!-- SPDX-License-Identifier: MIT -->

<div class="animate-fade-in-up flex w-full gap-3" [class.justify-end]="isUser()">
  @if (!isUser()) {
    <div class="bg-brand-100 text-brand-700 flex h-8 w-8 shrink-0 items-center justify-center rounded-full text-sm">
      <i class="fa-duotone fa-sparkles"></i>
    </div>
  }

  <div class="max-w-[80%] rounded-2xl px-4 py-3" [class]="isUser() ? 'bg-brand-600 text-white' : 'bg-surface border-border border'">
    @if (isUser()) {
      <p class="text-sm whitespace-pre-wrap">{{ content() }}</p>
    } @else {
      @if (content()) {
        <lfx-markdown-renderer [content]="content()" />
      } @else {
        <div class="flex items-center gap-2">
          <div class="animate-typing-bounce bg-text-muted h-2 w-2 rounded-full"></div>
          <div class="animate-typing-bounce bg-text-muted h-2 w-2 rounded-full [animation-delay:150ms]"></div>
          <div class="animate-typing-bounce bg-text-muted h-2 w-2 rounded-full [animation-delay:300ms]"></div>
        </div>
      }
    }
  </div>

  @if (isUser()) {
    <div class="bg-surface-alt text-text-secondary flex h-8 w-8 shrink-0 items-center justify-center rounded-full text-sm">
      <i class="fa-duotone fa-user"></i>
    </div>
  }
</div>
