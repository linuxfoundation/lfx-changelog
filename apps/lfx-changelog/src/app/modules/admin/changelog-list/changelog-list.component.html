<!-- Copyright The Linux Foundation and each contributor to LFX. -->
<!-- SPDX-License-Identifier: MIT -->

<div class="space-y-6">
  <div class="animate-slide-in-left flex items-center justify-between">
    <div>
      <h1 data-testid="changelog-list-heading" class="font-display text-text-primary text-2xl font-bold">Changelogs</h1>
      <p class="text-text-secondary mt-1">Manage changelog entries across all products.</p>
    </div>
    <a data-testid="changelog-list-new-entry-btn" routerLink="/admin/changelogs/new">
      <lfx-button variant="primary">
        <i class="fa-solid fa-plus text-xs"></i>
        New Entry
      </lfx-button>
    </a>
  </div>

  <!-- Filters -->
  <div class="animate-fade-in-up relative z-10 grid grid-cols-1 gap-4 [animation-delay:100ms] sm:grid-cols-2">
    <lfx-select
      data-testid="changelog-list-product-filter"
      label="Product"
      [options]="productOptions()"
      [formControl]="productFilterControl"
      placeholder="All Products" />
    <lfx-select
      data-testid="changelog-list-status-filter"
      label="Status"
      [options]="statusOptions"
      [formControl]="statusFilterControl"
      placeholder="All Statuses" />
  </div>

  <!-- Table -->
  <lfx-table
    class="animate-rise-in block [animation-delay:200ms]"
    [data]="filteredEntries()"
    [loading]="loading()"
    testId="changelog-list-table"
    emptyMessage="No entries match the selected filters."
    [currentPage]="currentPage()"
    [totalPages]="totalPages()"
    [totalItems]="totalItems()"
    [pageSize]="pageSize()"
    (pageChange)="onPageChange($event)">
    <ng-template lfxColumn="Title" let-entry>
      <a [routerLink]="['/admin/changelogs', entry.id, 'edit']" class="text-brand-600 hover:text-brand-700 text-sm font-medium">
        {{ entry.title }}
      </a>
    </ng-template>

    <ng-template lfxColumn="Product" let-entry>
      <span class="text-text-secondary text-sm">{{ entry.productId | productName: products() }}</span>
    </ng-template>

    <ng-template lfxColumn="Status" let-entry>
      <lfx-status-badge [status]="entry.status" />
    </ng-template>

    <ng-template lfxColumn="Version" let-entry>
      <span class="text-text-secondary text-sm">{{ entry.version ? 'v' + entry.version : 'â€”' }}</span>
    </ng-template>

    <ng-template lfxColumn="Updated" let-entry>
      <span class="text-text-muted text-sm">{{ entry.updatedAt | dateFormat }}</span>
    </ng-template>
  </lfx-table>
</div>
