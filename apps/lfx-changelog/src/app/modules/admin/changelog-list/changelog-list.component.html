<!-- Copyright The Linux Foundation and each contributor to LFX. -->
<!-- SPDX-License-Identifier: MIT -->

<div class="space-y-6">
  <div class="animate-slide-in-left flex items-center justify-between">
    <div>
      <h1 class="font-display text-text-primary text-2xl font-bold">Changelogs</h1>
      <p class="text-text-secondary mt-1">Manage changelog entries across all products.</p>
    </div>
    <a routerLink="/admin/changelogs/new">
      <lfx-button variant="primary">
        <i class="fa-solid fa-plus text-xs"></i>
        New Entry
      </lfx-button>
    </a>
  </div>

  <!-- Filters -->
  <div class="animate-fade-in-up relative z-10 grid grid-cols-1 gap-4 [animation-delay:100ms] sm:grid-cols-2">
    <lfx-select label="Product" [options]="productOptions()" [formControl]="productFilterControl" placeholder="All Products" />
    <lfx-select label="Status" [options]="statusOptions" [formControl]="statusFilterControl" placeholder="All Statuses" />
  </div>

  <!-- Table -->
  <lfx-card padding="none" class="animate-rise-in block [animation-delay:200ms]">
    <div class="overflow-x-auto">
      <table class="w-full">
        <thead>
          <tr class="border-border bg-surface-alt border-b text-left">
            <th class="text-text-muted px-5 py-3 text-xs font-medium tracking-wider uppercase">Title</th>
            <th class="text-text-muted px-5 py-3 text-xs font-medium tracking-wider uppercase">Product</th>
            <th class="text-text-muted px-5 py-3 text-xs font-medium tracking-wider uppercase">Status</th>
            <th class="text-text-muted px-5 py-3 text-xs font-medium tracking-wider uppercase">Version</th>
            <th class="text-text-muted px-5 py-3 text-xs font-medium tracking-wider uppercase">Updated</th>
          </tr>
        </thead>
        <tbody class="divide-border divide-y">
          @for (entry of filteredEntries(); track entry.id; let i = $index) {
            <tr class="table-row-enter hover:bg-surface-alt transition-colors" [style.animation-delay.ms]="300 + i * 50">
              <td class="px-5 py-3">
                <a [routerLink]="['/admin/changelogs', entry.id, 'edit']" class="text-brand-600 hover:text-brand-700 text-sm font-medium">
                  {{ entry.title }}
                </a>
              </td>
              <td class="text-text-secondary px-5 py-3 text-sm">{{ entry.productId | productName: products() }}</td>
              <td class="px-5 py-3">
                <lfx-status-badge [status]="entry.status" />
              </td>
              <td class="text-text-secondary px-5 py-3 text-sm">{{ entry.version ? 'v' + entry.version : 'â€”' }}</td>
              <td class="text-text-muted px-5 py-3 text-sm">{{ entry.updatedAt | dateFormat }}</td>
            </tr>
          }
        </tbody>
      </table>

      @if (filteredEntries().length === 0) {
        <div class="text-text-muted py-12 text-center text-sm">No entries match the selected filters.</div>
      }
    </div>
  </lfx-card>
</div>
