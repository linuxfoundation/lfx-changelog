<div class="space-y-4">
  <h2 class="text-text-primary text-lg font-semibold">
    <i class="fa-duotone fa-rectangle-list text-brand-600 mr-2"></i>
    Latest Changelogs
  </h2>

  @if (loading()) {
    <lfx-card>
      <div class="flex items-center justify-center py-12">
        <i class="fa-duotone fa-spinner-third text-brand-600 animate-spin text-2xl"></i>
      </div>
    </lfx-card>
  } @else if (isEmpty()) {
    <lfx-card>
      <div class="flex flex-col items-center justify-center py-12 text-center">
        <i class="fa-duotone fa-rectangle-list text-text-muted mb-3 text-4xl"></i>
        <h3 class="text-text-primary mb-1 text-base font-medium">No changelogs yet</h3>
        <p class="text-text-muted max-w-sm text-sm">Create a changelog entry for this product to see it here.</p>
      </div>
    </lfx-card>
  } @else {
    <lfx-card padding="none">
      <div class="divide-border divide-y">
        @for (entry of changelogs(); track entry.id) {
          <a
            [routerLink]="['/entry', entry.id]"
            target="_blank"
            class="hover:bg-surface-alt block px-5 py-3.5 transition-colors first:rounded-t-lg last:rounded-b-lg">
            <div class="flex items-start justify-between gap-3">
              <div class="min-w-0 flex-1">
                <div class="flex flex-wrap items-center gap-2">
                  <span class="text-text-primary text-sm font-medium">{{ entry.title }}</span>
                  @if (entry.version) {
                    <span
                      class="bg-brand-100 text-brand-700 dark:bg-brand-900/30 dark:text-brand-400 shrink-0 rounded-full px-1.5 py-0.5 font-mono text-[10px] font-medium">
                      v{{ entry.version }}
                    </span>
                  }
                  @if (entry.status === 'draft') {
                    <span class="bg-surface-alt text-text-muted shrink-0 rounded-full px-1.5 py-0.5 text-[10px] font-medium">Draft</span>
                  }
                </div>
                <p class="text-text-muted mt-1 line-clamp-1 text-xs">{{ entry.description | slice: 0 : 120 }}</p>
              </div>
              <span class="text-text-muted shrink-0 text-xs">{{ entry.publishedAt || entry.createdAt | date: 'MMM d' }}</span>
            </div>
          </a>
        }
      </div>
    </lfx-card>
  }
</div>
