<!-- Copyright The Linux Foundation and each contributor to LFX. -->
<!-- SPDX-License-Identifier: MIT -->

<div class="bg-canvas min-h-screen">
  <!-- Header -->
  <header data-testid="public-layout-header" class="border-border bg-surface/80 sticky top-0 z-30 border-b backdrop-blur-lg">
    <div class="mx-auto flex h-16 max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8">
      <div class="flex items-center gap-8">
        <a data-testid="public-layout-logo" routerLink="/" class="flex items-center gap-2.5">
          <img src="/logo_lfx.svg" alt="LFX" class="h-7" />
        </a>
        <nav class="hidden items-center gap-1 sm:flex">
          <a
            data-testid="public-layout-all-updates-link"
            routerLink="/"
            routerLinkActive="bg-surface-alt text-text-primary"
            [routerLinkActiveOptions]="{ exact: true }"
            class="text-text-secondary hover:bg-surface-alt hover:text-text-primary rounded-lg px-3 py-1.5 text-sm font-medium transition-colors">
            All Updates
          </a>
          <a
            data-testid="public-layout-chat-link"
            routerLink="/chat"
            routerLinkActive="bg-surface-alt text-text-primary"
            class="text-text-secondary hover:bg-surface-alt hover:text-text-primary flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-sm font-medium transition-colors">
            <i class="fa-duotone fa-messages text-xs"></i>
            Chat
          </a>
        </nav>
      </div>
      <div class="flex items-center gap-2">
        <!-- Theme toggle -->
        <button
          data-testid="public-layout-theme-toggle"
          (click)="toggleTheme()"
          class="text-text-secondary hover:bg-surface-alt hover:text-text-primary rounded-lg p-2 transition-colors"
          [attr.aria-label]="isDark() ? 'Switch to light mode' : 'Switch to dark mode'">
          @if (isDark()) {
            <i class="fa-duotone fa-sun-bright animate-spin-in text-base"></i>
          } @else {
            <i class="fa-duotone fa-moon animate-spin-in text-base"></i>
          }
        </button>
        @if (authenticated() && dbUser()) {
          <a
            data-testid="public-layout-admin-btn"
            routerLink="/admin"
            class="bg-brand-600 hover:bg-brand-700 rounded-lg px-4 py-2 text-sm font-medium text-white shadow-sm transition-all duration-200 hover:shadow-md">
            Admin
          </a>
        } @else if (authenticated()) {
          <a
            data-testid="public-layout-logout-btn"
            href="/logout"
            class="bg-brand-600 hover:bg-brand-700 rounded-lg px-4 py-2 text-sm font-medium text-white shadow-sm transition-all duration-200 hover:shadow-md">
            Logout
          </a>
        } @else {
          <a
            data-testid="public-layout-login-btn"
            href="/login"
            class="bg-brand-600 hover:bg-brand-700 rounded-lg px-4 py-2 text-sm font-medium text-white shadow-sm transition-all duration-200 hover:shadow-md">
            Login
          </a>
        }
      </div>
    </div>
  </header>

  <!-- Main content -->
  <main class="mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8">
    <router-outlet />
  </main>

  <!-- Footer -->
  <footer class="border-border bg-surface border-t py-8">
    <div class="text-text-muted mx-auto max-w-7xl px-4 text-center text-sm sm:px-6 lg:px-8">
      &copy; {{ currentYear }} The Linux Foundation. All rights reserved.
    </div>
  </footer>
</div>
